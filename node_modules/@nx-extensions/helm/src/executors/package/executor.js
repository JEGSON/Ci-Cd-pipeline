"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const core_1 = require("@nx-extensions/core");
const runExecutor = (options, context) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    const helm = (0, core_1.createHelmClient)();
    if (options.dependencies.repositories) {
        for (const repository of options.dependencies.repositories) {
            yield helm.addRepository(repository.name, repository.url);
        }
    }
    if (options.dependencies.update) {
        yield helm.dependencyUpdate(options.chartFolder);
    }
    if (options.dependencies.build) {
        yield helm.dependencyBuild(options.chartFolder);
    }
    const chartPath = yield helm.package({
        chartFolder: options.chartFolder,
        outputFolder: options.outputFolder,
    });
    if (options.push) {
        yield helm.push({
            chartPath: chartPath,
            remote: options.remote,
        });
    }
    return {
        success: true,
    };
});
exports.default = runExecutor;
//# sourceMappingURL=executor.js.map