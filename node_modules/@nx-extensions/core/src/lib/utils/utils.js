"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ensureInitialized = void 0;
const tslib_1 = require("tslib");
/**
 * Decorator to ensure the class is initialized before executing a method
 *
 * @param {any} target
 * @param {string} propertyKey
 * @param {PropertyDescriptor} descriptor
 * @returns {PropertyDescriptor}
 */
const ensureInitialized = (target, propertyKey, descriptor) => {
    const originalMethod = descriptor.value;
    descriptor.value = function (...arguments_) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const self = this;
            if (self.initialized === undefined ||
                typeof self.initialize !== 'function') {
                throw new TypeError(`The ensureInitialized decorator can only be applied in classes with an 'initialized' property and 'initialize' method.`);
            }
            if (!self.initialized) {
                yield self.initialize();
            }
            return originalMethod.apply(this, arguments_);
        });
    };
    return descriptor;
};
exports.ensureInitialized = ensureInitialized;
//# sourceMappingURL=utils.js.map