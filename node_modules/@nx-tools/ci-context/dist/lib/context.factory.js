"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ContextProxyFactory = void 0;
const core_1 = require("@nx-tools/core");
const azure_devops_1 = require("./utils/azure-devops");
const bitbucket_1 = require("./utils/bitbucket");
const circle_1 = require("./utils/circle");
const drone_1 = require("./utils/drone");
const git_1 = require("./utils/git");
const github_1 = require("./utils/github");
const gitlab_1 = require("./utils/gitlab");
const jenkins_1 = require("./utils/jenkins");
const semaphore_1 = require("./utils/semaphore");
const teamcity_1 = require("./utils/teamcity");
const travis_1 = require("./utils/travis");
const ci = require('ci-info');
class ContextProxyFactory {
    static async create() {
        switch (true) {
            case ci.AZURE_PIPELINES:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return azure_devops_1.Azure.context();
            case ci.BITBUCKET:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return bitbucket_1.BitBucket.context();
            case ci.CIRCLE:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return circle_1.Circle.context();
            case ci.DRONE:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return drone_1.Drone.context();
            case ci.GITHUB_ACTIONS:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return github_1.Github.context();
            case ci.GITLAB:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return gitlab_1.Gitlab.context();
            case ci.JENKINS:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return jenkins_1.Jenkins.context();
            case ci.SEMAPHORE:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return semaphore_1.Semaphore.context();
            case ci.TRAVIS:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return travis_1.Travis.context();
            case ci.TEAMCITY:
                core_1.logger.info(`CI Provider: ${ci.name}`);
                return teamcity_1.Teamcity.context();
            default:
                core_1.logger.info(`Unsupported CI Provider... Using Git as fallback`);
                return git_1.Git.context();
        }
    }
}
exports.ContextProxyFactory = ContextProxyFactory;
